## âœ… `create_data_source_bucket(kms_key)`

### ğŸ“Œ Bucket éƒ¨å±¬è¡Œç‚ºèªªæ˜ï¼š

| Bucket åç¨±           | ä¾†æº         | æ˜¯å¦ç”± CDK å»ºç«‹ | èªªæ˜                                                                 |
|------------------------|--------------|----------------|----------------------------------------------------------------------|
| `athena_bucket`        | æ‰‹å‹•å»ºç«‹     | âŒ               | æœ¬æ¬¡é€é `Bucket.from_bucket_name()` å¼•ç”¨ï¼Œé¿å…é‡è¤‡å»ºç«‹é€ æˆè¡çª              |
| `agent_assets_bucket` | CDK å»ºç«‹     | âœ…               | ç”¨ä¾†å­˜æ”¾çŸ¥è­˜æ–‡ä»¶èˆ‡ API schemaï¼Œåƒ…æ­¤ç”¨é€”                                 |

### âš ï¸ æ³¨æ„äº‹é …ï¼š

- `athena_bucket` ç‚ºå…±ç”¨æˆ–æ­·å² Bucketï¼Œ**å¿…é ˆé å…ˆå­˜åœ¨**ï¼Œå¦å‰‡éƒ¨ç½²æœƒå¤±æ•—
- `agent_assets_bucket` è¨­å®šå¦‚ä¸‹ï¼š
  - **åŠ å¯†æ–¹å¼**ï¼šKMSï¼ˆè‡ªå®šç¾©é‡‘é‘°ï¼‰
  - **ç‰ˆæœ¬æ§åˆ¶**ï¼šé–‹å•Ÿ `versioned=True`
  - **åˆªé™¤ç­–ç•¥**ï¼šä¿ç•™ï¼ˆ`removal_policy=RETAIN`ï¼‰ï¼Œç¢ºä¿è³‡æ–™ä¸è¢«èª¤åˆª
  - **è‡ªå‹•åˆªé™¤**ï¼šé—œé–‰ï¼ˆ`auto_delete_objects=False`ï¼‰

---

## âœ… `upload_files_to_s3(...)`

### ğŸ“ éœ€ä¸Šå‚³çš„æª”æ¡ˆèˆ‡å°æ‡‰ Bucketï¼š

| é¡åˆ¥             | æª”æ¡ˆä¾†æºè³‡æ–™å¤¾                      | ä¸Šå‚³ Bucket           | ä¸Šå‚³ç›®çš„åœ° Prefix                   | æ˜¯å¦ç”± CDK è‡ªå‹•ä¸Šå‚³ |
|------------------|---------------------------------------|------------------------|-------------------------------------|----------------------|
| çŸ¥è­˜æ–‡ä»¶ (KB)     | `assets/<knowledgebase_prefix>/`     | `agent_assets_bucket` | `<knowledgebase_prefix>/`          | âœ…                    |
| API Schema       | `assets/agent_api_schema/`           | `agent_assets_bucket` | `agent_api_schema/`                | âœ…                    |
| Athena è³‡æ–™è¡¨ CSV | `assets/<athena_data_prefix>/`       | `athena_bucket`       | `<athena_data_prefix>/`            | âŒï¼ˆéœ€æ‰‹å‹•ä¸Šå‚³ï¼‰      |

### ğŸ“ è¨­å®šèˆ‡è¡Œç‚ºèªªæ˜ï¼š

- ä½¿ç”¨ `s3deploy.BucketDeployment` éƒ¨ç½²ä»¥ä¸‹å…©é¡è³‡æ–™ï¼š
  - âœ… **çŸ¥è­˜æ–‡ä»¶**ï¼ˆå¯å£“ç¸® .zipï¼‰
  - âœ… **API Schema**ï¼ˆå¦‚ JSON æ–‡ä»¶ï¼‰
- âœ… ä¸Šè¿°çš†å¯é€é `cdk deploy` è‡ªå‹•ä¸Šå‚³
- âŒ Athena CSV è³‡æ–™è¡¨éƒ¨åˆ†ï¼Œ**å› ç‚º Bucket ç‚ºå¤–éƒ¨æŒ‡å®šä¸”å›ºå®šå‘½åï¼Œä¸ç”± CDK ç®¡ç†èˆ‡ä¸Šå‚³**ï¼Œè«‹é–‹ç™¼è€…æ‰‹å‹•ç¶­è­·

### ğŸ§  ç‚ºä»€éº¼ Athena è³‡æ–™ä¸è‡ªå‹•ä¸Šå‚³ï¼Ÿ

- è©² Bucket ç‚ºå…±ç”¨è³‡æºï¼Œé¿å… CDK èª¤åˆªæˆ–ä¸Šå‚³è¦†è“‹
- Athena è³‡æ–™è¼ƒé¾å¤§æˆ–è®Šå‹•é »ç¹ï¼Œé©åˆé€é Data Pipeline æˆ– CLI ä¸Šå‚³

---

âœ… å®Œæ•´éƒ¨å±¬å‰ç¢ºèªï¼š

- [ ] `chatbot-stack-athena-bucket-<account_id>` å·²äº‹å…ˆå»ºç«‹ï¼Œä¸”æ¬Šé™èˆ‡çµæ§‹ç¬¦åˆéœ€æ±‚
- [ ] `assets/agent_api_schema/` èˆ‡ `assets/<knowledgebase_prefix>/` æª”æ¡ˆå·²é½Šå‚™
- [ ] `cdk.json` ä¸­ç›¸é—œ prefix è¨­å®šæ­£ç¢ºç„¡èª¤

âœ… å¯ç”± CDK è‡ªå‹•ä¸Šå‚³çš„è³‡æ–™ï¼š
- `knowledgebase_file_name`
- API schema (.json)

â›” ä¸ç”± CDK ä¸Šå‚³çš„è³‡æ–™ï¼š
- Athena æŸ¥è©¢è³‡æ–™ï¼ˆå¦‚ .csvï¼‰ï¼Œéœ€ç”±ä½¿ç”¨è€…æ‰‹å‹•æ”¾ç½®æ–¼ Bucket çš„å°æ‡‰ Prefix å…§